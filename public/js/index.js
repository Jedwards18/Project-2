
function insertNewSearch(event) {
  //event.preventDefault();
  var search = {
    project_name: $("#project-name").val().trim(),
    category: $("#category").val().trim(),
    country: $("#country").val().trim(),
    min_goal: $("#min-goal").val().trim(),
    max_goal: $("#max-goal").val().trim()
  };
  $.ajax({
    url: "/api/new",
    dataType: "json",
    type: "post",
    data: search,
  });
  console.log(search);
};
//Front-end JavaScript//
$(document).ready(function(){
  $("#resultsContainer").hide();
}); 

//inits materialize features
// Makes Collapsible werk werk werk werk werk
const elem = document.querySelector('.collapsible.expandable');
const instance = M.Collapsible.init(elem, {
  accordion: false
});
$(document).ready(function(){
  $('.tabs').tabs();  
});
$(document).ready(function(){
  $('.parallax').parallax();
});
$(document).ready(function(){
  $('.tooltipped').tooltip();
});

$(document).ready(function(){
  $('select').formSelect();
});
$(document).ready(function(){
  $('.collapsible').collapsible();
});


$(document).ready(function(){
  //Populates User Searches Table on page load  
    $.ajax({
      url:"/api/new/",
      method: "get"}).then(function(response) {
        console.log(response);
        for (var i = 0; i < 5; i++) {
          $("#searchesBody").append(`</tr><tr><td> ${response[i].project_name} </td>
          <td> ${response[i].category} </td>
          <td> ${response[i].country} </td>
          <td> ${response[i].min_goal} </td>
          <td> ${response[i].max_goal} </td>`);
        }
    });
    // On Submit Button Press
    $("#submit-button").on("click", function(event) {
      event.preventDefault();

      const category = $("#category").val();
      const country = $("#country").val();
      const minGoal = $("#min-goal").val();
      const maxGoal = $("#max-goal").val();
      //Won't submit post if missing information
      if(!category || !country || !minGoal || !maxGoal){
        console.log("No input");
        console.log(category+country+minGoal+maxGoal);
        return;
      }
        
      $.ajax({
        url: "/api/"+country+"/"+category+"/?goal1="+minGoal+"&goal2="+maxGoal,
        method: "get"}).then(function(response) {
        console.log(response);
        //If no results the form will appear again.
        if (response.failurePercentage === 'null' || response.successPercentage === 'null') {
          console.log("No Results");
          $("form input").val("");
          select.prop('selectedIndex', 0); 
          select.formSelect();

          const noResults = '<span class="light-green-text text-accent-3">Unfortunately your search had no results</span>';
          M.toast({html: noResults});
        } else {
        // ####### Success/Fail Pie Chart ########
          $(function () {
            $('#pieChart').highcharts({
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                type: 'pie'
            },
            title: {
                text: "Success Rate of your Selection"
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: true,
                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                        style: {
                            color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                        }
                    }
                }
            },
            series: [{
                name: 'Success',
                colorByPoint: true,
                data: [{
                    name: 'Success',
                    y: response.successPercentage
                }, {
                    name: 'Failure',
                    y: response.failurePercentage
                }]
            }]
          
          });
          });     
        $("#successBody").empty();
        $("#failureBody").empty();
        const loopSuccessResults = function() {
          for (var i = 0; i < 5; i++) {
            $("#successBody").append(`</tr><tr><td> ${response.successfulResults[i].project_name} </td>
            <td> ${response.successfulResults[i].main_category} </td>
            <td> ${response.successfulResults[i].country} </td>
            <td> ${response.successfulResults[i].pledged} </td>
            <td> ${response.successfulResults[i].goal} </td>
            <td> ${response.successfulResults[i].backers} </td>`);
          }
        };
        
        const loopFailureResults = function() {
          for (var i = 0; i < 5; i++) {
            $("#failureBody").append(`</tr><tr><td> ${response.failureResults[i].project_name} </td>
            <td> ${response.failureResults[i].main_category} </td>
            <td> ${response.failureResults[i].country} </td>
            <td> ${response.failureResults[i].pledged} </td>
            <td> ${response.failureResults[i].goal} </td>
            <td> ${response.failureResults[i].backers} </td>`);
          }
        };
        $("#resultsContainer").show(1000);
        loopSuccessResults();
        loopFailureResults();
        };//end else statement
      });
    
      insertNewSearch();
    
  });
});

// CLEAR FORM BUTTON
const select = $("select");  //Variable that helps clear selects
$(document).ready(function(){
  $('#clear-form-button').on('click', function(e) {
    $("form input").val("");
    select.prop('selectedIndex', 0); 
    select.formSelect();   
  })
});
//Reset Materialize selects after being cleared
select.formSelect();

//######### CHARTS #############
$(function () {
  $('#chart1').highcharts({
  colorAxis: {
      minColor: "#f41400",
      maxColor: "#006df4"
  },
  series: [{
      type: 'treemap',
      layoutAlgorithm: 'squarified',
      tooltip: {
          valueSuffix: '% of All Projects'
    },
      data: [{
          name: 'Publishing',
          value: 10,
          colorValue: 29
      }, {
          name: 'Film & Video',
          value: 17,
          colorValue: 36
      }, {
          name: 'Music',
          value: 14,
          colorValue: 47
      }, {
          name: 'Food',
          value: 6,
          colorValue: 27
      }, {
          name: 'Design',
          value: 8,
          colorValue: 34
      }, {
          name: 'Crafts',
          value: 2,
          colorValue: 24
      }, {
          name: 'Games',
          value: 10,
          colorValue: 36
      }, {
          name: 'Comics',
          value: 3,
          colorValue: 55
      }, {
          name: 'Fashion',
          value: 6,
          colorValue: 24
      }, {
          name: 'Theater',
          value: 3,
          colorValue: 61
      }, {
          name: 'Art',
          value: 8,
          colorValue: 41
      }, {
          name: 'Photography',
          value: 3,
          colorValue: 31
      }, {
          name: 'Technology',
          value: 8,
          colorValue: 20
      }, {
          name: 'Dance',
          value: 1,
          colorValue: 60
      }, {
          name: 'Journalism',
          value: 1,
          colorValue: 18
      },
    ]
  }],
  title: {
      text: 'Size and Success of Each Category'
  },
  legend: {
      enabled: true,
      title: {
        text: 'Percent Successful<br/><span style="font-size: 9px; color: #666; font-weight: normal"></span>',
        style: {
            fontStyle: 'italic'
        }
  }
}
  });
});

$(function () {
  $('#chart2').highcharts({
  chart: {
      type: 'column'
  },
  title: {
      text: 'Category Size and Success Rate'
  },
  xAxis: {
      categories: ['Publishing','Film & Video','Music','Food','Design','Crafts','Games','Comics','Fashion','Theater','Art','Photography','Technology','Dance','Journalism']
  },
  yAxis: {
      min: 0,
      title: {
          text: 'Percent of All Projects'
      },
      stackLabels: {
          enabled: true,
          style: {
              fontWeight: 'bold',
              color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
          }
      }
  },
  legend: {
      align: 'right',
      x: -30,
      verticalAlign: 'top',
      y: 25,
      floating: true,
      backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
      borderColor: '#CCC',
      borderWidth: 1,
      shadow: false
  },
  tooltip: {
      headerFormat: '<b>{point.x}</b><br/>',
      pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
  },
  plotOptions: {
      column: {
          stacking: 'normal',
          dataLabels: {
              enabled: false,
              color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
          }
      }
  },
  series: [{
        name: 'Success Rate',
        data: [3.0,6.3,6.6,1.7,2.8,0.6,3.5,1.6,1.4,1.7,3.2,0.8,1.7,0.5,0.2]
    }, {
        name: 'Failure Rate',
        data: [7.3,10.9,7.3,4.5,5.4,1.8,6.3,1.3,4.4,1.1,4.5,1.9,6.5,0.4,0.9]
    }]
});
});


$(function () {
  $('#chart3').highcharts({
  chart: {
      type: 'scatter',
      zoomType: 'xy'
  },
  title: {
      text: 'Funding Amount by Project Duration'
  },
  xAxis: {
      title: {
          enabled: true,
          text: 'Percent of Goal Funded'
      },
      startOnTick: true,
      endOnTick: true,
      showLastLabel: true,
      min: 0
  },
  yAxis: {
      title: {
          text: 'Days'
      }
  },
  legend: {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'top',
      floating: true,
      backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
      borderWidth: 1
  },
  plotOptions: {
      scatter: {
          marker: {
              radius: 5,
              states: {
                  hover: {
                      enabled: true,
                      lineColor: 'rgb(100,100,100)'
                  }
              }
          },
          states: {
              hover: {
                  marker: {
                      enabled: false
                  }
              }
          },
          tooltip: {
              headerFormat: '<b>{series.name}</b><br>',
              pointFormat: '{point.x} Percent Funded, {point.y} Days'
          }
      }
  },
  series: [{
      name: 'Succeeded',
      color: 'rgba(119, 152, 191, .5)',
      data: [
        [1.05, 35], [1.21, 20] , [1.02, 30], [1, 15], [1.71, 35], [1.58, 30], [2.75, 30], [1.12, 30], [1.15, 30], [1, 30], [1.11, 30], [2.16, 30], [1.57, 30], [1.17, 30], [1, 11], [1.59, 30], [1.27, 48], [1.59, 30], [1.18, 30], [2.7, 30], [1.02, 25], [1.22, 25], [1.01, 30], [1.02, 42], [1.49, 30], [1.03, 60], [1.2, 30], [1.09, 25], [1.01, 34], [3.08, 22], [1.51, 17], [1.24, 30], [2.25, 30], [1.04, 45], [1.04, 46], [1.29, 30], [1.25, 40], [1.13, 25], [1.51, 31], [1.37, 15], [1.06, 30], [2.36, 34], [1.08, 49], [1.03, 45], [1.46, 41], [1.04, 36], [1.05, 30], [1.53, 30], [1.33, 30], [1.01, 37], [1.81, 30], [1.06, 45], [3.62, 31], [1.01, 14], [1.01, 30], [1.11, 35], [1.07, 41], [2.88, 20], [1.14, 15], [2.53, 37], [1.19, 15], [1.27, 45], [1.02, 55], [1.02, 25], [1.16, 30], [1.04, 30], [1.18, 30], [1.03, 30], [1.06, 32], [2.33, 14], [1.2, 60], [1.03, 32], [1.24, 22], [1.12, 30], [1.6, 30], [1.2, 33], [1.02, 36], [1.15, 30], [1.12, 29], [1.08, 30], [1.1, 30], [1.46, 14], [1.08, 38], [1.61, 30], [1.29, 48], [1, 29], [1.2, 35], [1, 5], [1.45, 20], [1.07, 30], [1.16, 40], [1, 30], [1.12, 30], [2.66, 30], [1.2, 30], [1.45, 36], [3.69, 45], [3.05, 30], [1.3, 31], [1.27, 30], [1.17, 30], [1.03, 25], [1.01, 16], [1.1, 30], [1.04, 61], [1.94, 21], [1.02, 31], [1.15, 18], [1.15, 20], [1.04, 36], [1.14, 30], [1.29, 30], [1.55, 21], [1.34, 24], [1.17, 33], [1.2, 26], [1.11, 45], [1.17, 33], [1.01, 30], [1.36, 30], [1.44, 30], [1.17, 21], [1.25, 18], [1.03, 30], [1.06, 21], [3.37, 25], [1.06, 30], [1, 45], [1.12, 30], [1, 30], [1, 31], [1.06, 28], [1.36, 53], [1.33, 60], [1.28, 30], [1.03, 37], [1.34, 27], [1.59, 40], [1.93, 18], [1.03, 45], [1.48, 30], [1.2, 35], [1.36, 30], [1.02, 39], [1.22, 34], [1.22, 30], [1.03, 45], [1.17, 31], [1.15, 27], [1, 30], [1.03, 30], [1.03, 25], [1.11, 45], [1.02, 50], [1.02, 31], [1.01, 30], [1.18, 21], [1.03, 60], [1.78, 45], [1.03, 31], [1.15, 30], [1.18, 21], [1.11, 30], [1, 30], [1.27, 31], [1.14, 37], [1.26, 40], [1.68, 30], [1.01, 45], [1.01, 12], [1.01, 16], [1.08, 10], [2.03, 30], [1.1, 22], [3.49, 56], [1.07, 14], [1.07, 30], [1.11, 16], [1.2, 30], [3.68, 20], [1.05, 50], [1.24, 25], [1, 32], [1.67, 30], [2, 23], [2.34, 30], [1, 30], [1, 30], [1.13, 29], [1.65, 30], [1.04, 33], [1.19, 40], [1.25, 13], [2.26, 35], [1.12, 30], [3.04, 60], [1.17, 37], [1.08, 22], [2.59, 30], [1.74, 30], [2.55, 57], [1.02, 30], [1.01, 35], [1.15, 30], [1.25, 31], [1.13, 30], [2, 30], [2.02, 30], [1.29, 30], [3.6, 30], [1.9, 21], [1.1, 20], [1.08, 25], [1.48, 20], [1.26, 45], [1.03, 30], [1.73, 46], [1.07, 31], [1.18, 30], [1.12, 36], [1.33, 30], [1.26, 30], [1.68, 30], [1.03, 30], [1.18, 30], [1, 30], [1.1, 60], [1, 10], [1.19, 35], [1.1, 30], [1.14, 45], [3.39, 31], [1.07, 41], [1.13, 33], [1, 8], [1.02, 30], [1.02, 30], [1.03, 25], [1.17, 24], [1, 32], [2.1, 30], [1.02, 35], [1.03, 43], [1.02, 60], [1.19, 30], [1.01, 32], [1.11, 55], [1.17, 45], [1.28, 40], [1.07, 29], [1.01, 30], [1, 30], [1, 55], [1.03, 30], [1.05, 30], [1.12, 31], [1.02, 30], [1.08, 47], [2.12, 35], [1.12, 28], [1.2, 30], [1, 30], [1.57, 30], [1.13, 31], [1.15, 32], [1.13, 33], [3.35, 33], [1.12, 33], [1, 30], [1.01, 30], [1.21, 71], [1.22, 27], [1.11, 30], [2.33, 30], [1.41, 45], [1.22, 32], [1.34, 30], [1.12, 30], [1.71, 30], [1.15, 30], [1.1, 37], [1.22, 30], [1.71, 30], [1, 9], [1.02, 30], [3.3, 30], [1.35, 31], [1.26, 30], [1.19, 30], [1.29, 14], [1.07, 31], [1.3, 31], [2.16, 30], [1.01, 30], [1.26, 30], [1.01, 39], [1.19, 30], [2.1, 35], [1.39, 30], [3.31, 30], [1.27, 27], [1.01, 28], [1.23, 37], [2.59, 30], [1, 16], [1.22, 8], [1.05, 30], [1.12, 28], [2.1, 31], [1.06, 45], [1.15, 30], [1.03, 20], [1.01, 24], [2.68, 28], [1.53, 31], [1.15, 30], [1.05, 30], [1.41, 30], [1.07, 34], [1.32, 30], [1.4, 50], [1.55, 33], [1.56, 40], [1.1, 32], [1.19, 24], [1.01, 30], [1.39, 30], [1.14, 17], [2.43, 30], [2.33, 30], [1.13, 38], [1.16, 17], [1, 60], [1.08, 30], [1.09, 38], [1.04, 29], [1.54, 60], [1.6, 14], [3.7, 30], [1.34, 36], [1.33, 31], [1, 30], [1.31, 30], [1.55, 32], [1.53, 45], [1.05, 30], [1.53, 7], [1.65, 30], [2.24, 30], [2.04, 32], [1.14, 7], [1.2, 30], [1.13, 30], [2.32, 35], [1.01, 30], [1.03, 24], [1.33, 48], [1.53, 30], [1, 60], [1.72, 30], [1, 60], [3.84, 45], [1.28, 30], [1.1, 32], [1.97, 40], [1.53, 16], [1.27, 27], [1.03, 33], [1.03, 40], [1.01, 21], [1.28, 22], [1, 30], [1.19, 45], [1.06, 33] ]   
        }, 
        {name: 'Failed',       
         color: 'rgba(223, 83, 83, .5)',
         data: [
          [0, 59], [0.08, 60], [0, 45], [0, 30], [0.07, 56], [0.02, 45], [0.07, 35], [0.1, 30], [0, 30], [0, 30], [0, 45], [0.27, 30], [0.26, 30], [0.26, 30], [0.36, 30], [0, 30], [0.19, 30], [0.1, 30], [0, 30], [0.01, 30], [0.06, 40], [0.14, 30], [0.01, 35], [0.2, 60], [0.57, 25], [0, 35], [0.08, 41], [0, 35], [0, 30], [0, 29], [0, 30], [0.01, 30], [0, 60], [0.01, 30], [0.12, 30], [0.57, 45], [0, 30], [0, 30], [0.05, 30], [0, 30], [0.02, 25], [0, 30], [0.19, 31], [0, 35], [0.44, 43], [0, 30], [0.35, 29], [0.03, 60], [0.03, 53], [0.14, 30], [0.01, 60], [0.02, 60], [0.34, 30], [0.09, 44], [0.11, 45], [0.01, 60], [0, 30], [0, 60], [0.31, 30], [0.23, 32], [0.01, 35], [0.01, 66], [0.15, 35], [0, 30], [0, 30], [0.47, 25], [0, 30], [0, 60], [0.01, 30], [0, 61], [0.02, 35], [0, 60], [0, 29], [0.18, 30], [0.36, 30], [0, 20], [0.01, 30], [0.4, 30], [0.07, 30], [0, 18], [0, 33], [0.09, 45], [0.1, 30], [0, 30], [0.01, 30], [0, 40], [0.88, 5], [0, 30], [0, 45], [0, 45], [0.26, 30], [0.15, 30], [0.16, 45], [0.02, 30], [0.09, 37], [0.2, 60], [0.22, 30], [0.13, 60], [0.08, 33], [0.09, 30], [0, 30], [0.08, 60], [0.53, 30], [0, 45], [0.09, 45], [0.33, 30], [0.15, 30], [0.04, 60], [0, 60], [0.08, 30], [0.02, 30], [0.04, 30], [0.06, 45], [0.03, 30], [0.01, 51], [0.01, 30], [0, 30], [0, 30], [0.03, 30], [0.08, 25], [0.01, 42], [0.01, 27], [0, 53], [0.04, 30], [0.01, 30], [0, 24], [0, 30], [0.12, 60], [0, 30], [0, 29], [0, 32], [0, 30], [0, 60], [0.09, 52], [0.03, 45], [0, 24], [0, 21], [0.04, 15], [0.01, 30], [0, 20], [0, 60], [0.02, 45], [0, 30], [0.05, 30], [0, 60], [0.02, 28], [0.75, 31], [0, 30], [0, 60], [0.36, 31], [0.03, 30], [0, 30], [0.01, 45], [0, 30], [0.74, 38], [0.06, 30], [0.43, 37], [0, 40], [0.09, 42], [0.07, 46], [0.47, 30], [0.06, 60], [0.16, 20], [0.01, 30], [0.18, 45], [0.02, 31], [0.02, 30], [0.32, 34], [0.04, 30], [0.66, 30], [0.12, 30], [0, 40], [0.37, 30], [0.48, 18], [0.06, 30], [0.16, 17], [0.02, 40], [0.01, 15], [0.07, 30], [0.4, 30], [0, 60], [0, 30], [0.12, 60], [0.07, 30], [0, 35], [0.5, 14], [0, 30], [0.16, 30], [0.02, 30], [0, 15], [0.18, 60], [0.03, 31], [0, 60], [0, 30], [0.01, 40], [0.19, 31], [0, 50], [0.08, 60], [0, 30], [0, 60], [0, 45], [0.05, 60], [0, 30], [0, 60], [0.23, 30], [0, 30], [0, 17], [0.01, 30], [0.11, 35], [0.01, 50], [0.04, 87], [0.29, 30], [0, 46], [0.03, 16], [0, 21], [0, 60], [0.01, 23], [0, 30], [0, 60], [0, 30], [0.77, 60], [0.01, 45], [0, 60], [0.13, 60], [0, 60], [0.07, 34], [0.04, 30], [0.01, 35], [0, 30], [0.01, 43], [0.09, 30], [0.01, 30], [0, 30], [0, 36], [0.18, 30], [0.01, 60], [0, 45], [0, 60], [0, 30], [0.01, 60], [0.06, 30], [0, 20], [0.07, 30], [0.05, 30], [0, 30], [0.29, 40], [0.4, 30], [0.01, 30], [0.23, 43], [0.06, 35], [0.05, 30], [0, 30], [0.26, 40], [0.03, 40], [0, 45], [0.02, 17], [0.27, 16], [0.46, 13], [0.12, 30], [0, 45], [0, 30], [0.29, 13], [0, 30], [0.07, 34], [0.28, 45], [0, 15], [0, 30], [0, 30], [0.04, 15], [0.28, 30], [0.26, 30], [0, 59], [0.49, 18], [0, 50], [0.02, 35], [0.05, 30], [0.02, 20], [0.02, 30], [0, 30], [0, 38], [0.09, 45], [0.01, 30], [0.02, 60], [0, 21], [0, 30], [0.49, 30], [0, 30], [0.05, 30], [0, 30], [0.03, 30], [0.1, 30], [0.4, 30], [0.02, 30], [0, 30], [0.03, 30], [0.04, 30], [0, 60], [0.01, 30], [0, 30], [0.01, 30], [0.06, 30], [0, 25], [0.04, 30], [0.01, 30], [0, 30], [0.02, 45], [0, 35], [0.01, 30], [0.26, 30], [0.12, 31], [0.06, 30], [0, 30], [0.01, 30], [0, 60], [0.02, 29], [0, 30], [0.36, 60], [0, 60], [0.06, 45], [0.02, 48], [0, 60], [0.45, 28], [0.01, 30], [0.26, 50], [0, 16], [0.18, 43], [0.07, 40], [0, 60], [0.21, 60], [0, 30], [0.02, 40], [0, 29], [0, 30], [0, 20], [0.29, 30], [0.02, 60], [0, 40], [0.01, 40], [0.18, 30], [0.07, 11], [0.14, 29], [0.02, 30], [0.05, 30], [0.25, 30], [0, 30], [0, 22], [0.52, 30], [0, 30], [0.02, 30], [0, 30], [0.17, 30], [0.15, 12], [0.88, 30], [0.09, 30], [0, 33], [0, 24], [0, 30], [0.16, 83], [0.01, 50], [0.03, 50], [0.04, 60], [0, 30], [0.04, 26], [0.01, 45], [0, 17], [0.08, 35], [0, 30], [0, 45], [0, 30], [0.04, 30], [0.02, 60], [0, 30], [0.03, 30], [0, 29], [0.24, 18], [0.24, 33], [0, 28], [0, 60], [0, 30], [0, 45], [0.42, 30], [0, 30], [0, 35], [0.02, 60], [0.01, 45], [0.26, 60], [0.11, 15], [0.06, 30], [0, 30], [0.02, 30], [0.19, 45], [0.3, 45], [0.53, 44], [0, 56], [0.02, 29], [0.02, 54], [0, 30], [0.12, 30], [0.16, 60], [0.03, 30], [0.03, 90], [0, 30], [0, 60], [0, 30], [0, 30], [0, 30], [0.44, 30], [0.01, 32], [0.03, 30], [0.01, 30], [0, 30], [0.09, 30], [0, 30], [0.37, 24], [0.03, 30], [0.12, 28], [0.07, 18], [0.89, 30], [0.14, 6], [0.07, 35], [0.99, 17], [0, 30], [0.01, 30], [0.57, 30], [0.03, 30], [0.15, 35], [0, 30], [0, 50], [0.13, 32], [0.11, 43], [0.5, 30], [0.03, 34], [0.17, 30], [0, 30], [0, 60], [0.24, 30], [0.11, 30], [0, 30], [0.03, 27], [0.35, 30], [0, 15], [0.15, 10], [0, 60], [0, 33], [0.24, 19], [0, 30], [0.05, 59], [0.11, 30], [0, 33], [0.04, 30], [0.02, 30], [0.09, 15], [0, 60], [0, 45], [0, 30], [0.32, 30], [0.05, 26], [0.02, 30], [0, 30], [0.01, 30], [0, 30], [0, 30], [0, 30], [0.01, 30], [0, 30], [0.33, 5], [0, 60], [0, 30], [0.36, 60], [0, 30], [0, 30], [0.01, 36], [0, 30], [0.01, 30], [0.01, 27], [0, 40], [0.21, 30], [0.01, 30], [0.25, 6], [0.15, 31], [0.37, 40], [0.03, 33], [0.03, 40], [0.01, 60], [0.06, 31], [0.25, 30], [0, 35], [0.06, 30], [0, 30], [0.01, 30], [0.04, 30], [0.17, 30], [0.01, 30], [0.27, 18], [0.02, 30], [0, 45], [0, 30], [0.03, 30], [0.19, 30], [0, 30], [0.47, 62], [0.01, 59], [0.16, 37], [0.01, 35], [0, 60], [0.01, 30], [0.05, 37], [0, 30], [0, 30], [0.04, 40], [0, 26], [0.07, 45], [0, 30], [0, 30], [0, 6], [0.64, 20], [0, 20], [0.05, 30], [0, 19], [0, 30], [0, 38], [0.03, 22], [0.63, 30], [0, 30], [0, 30], [0.21, 45], [0, 30], [0.03, 30], [0.62, 21], [0.08, 37], [0.19, 38], [0.01, 30], [0, 30], [0, 30], [0, 47], [0.28, 30], [0.08, 30], [0.05, 30], [0, 30], [0.21, 90], [0.4, 30], [0, 38], [0.37, 30], [0, 1], [0.02, 30], [0.03, 60], [0.05, 30], [0.11, 30], [0.02, 30], [0, 22], [0.1, 30], [0.11, 39], [0.07, 25], [0.21, 30], [0.29, 30], [0, 49], [0.17, 33], [0, 30], [0.34, 31], [0.33, 30], [0, 1], [0, 50], [0.07, 30], [0.42, 30], [0.34, 30], [0, 45], [0.06, 31], [0.02, 39], [0, 30], [0.02, 60], [0, 30], [0.05, 45], [0.05, 21], [0, 32], [0, 30], [0.09, 51], [0.18, 30], [0.02, 60], [0, 25], [0.15, 30], [0, 60], [0, 30], [0.03, 30], [0.08, 30], [0, 30], [0, 30], [0, 30], [0.21, 30], [0.06, 34], [0.39, 21], [0, 30], [0.03, 31], [0.67, 45], [0.06, 30], [0.03, 29], [0.03, 30], [0.07, 35], [0.26, 31], [0, 60], [0.67, 45], [0.06, 30], [0.04, 30], [0.41, 45], [0.01, 40], [0, 60], [0, 25], [0, 30], [0.01, 38], [0.28, 30], [0.16, 45], [0.24, 45], [0, 50], [0, 30], [0.04, 14], [0.26, 26], [0.05, 30], [0.26, 36], [0, 30], [0, 30]
         ]
  }]
});
});

$(function () {
  $('#chart4').highcharts({
  chart: {
      type: 'scatter',
      zoomType: 'xy'
  },
  title: {
      text: 'Amount Funded by Goal Amount'
  },
  xAxis: {
      title: {
          enabled: true,
          text: 'Percent of Goal Funded'
      },
      startOnTick: true,
      endOnTick: true,
      showLastLabel: true,
      min: 0
  },
  yAxis: {
      title: {
          text: 'Goal Amount'
      }
  },
  legend: {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'top',
      floating: true,
      backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
      borderWidth: 1
  },
  plotOptions: {
      scatter: {
          marker: {
              radius: 5,
              states: {
                  hover: {
                      enabled: true,
                      lineColor: 'rgb(100,100,100)'
                  }
              }
          },
          states: {
              hover: {
                  marker: {
                      enabled: false
                  }
              }
          },
          tooltip: {
              headerFormat: '<b>{series.name}</b><br>',
              pointFormat: '{point.x} Percent Funded, ${point.y} '
          }
      }
  },
  series: [{
      name: 'Succeeded',
      color: 'rgba(119, 152, 191, .5)',
      data: [
        [1.05, 50000], [1.21, 1000], [1.02, 12500], [1, 250], [1.71, 20000], [1.58, 10000], [2.75, 17757], [1.12, 100], [1.15, 50000], [1, 2000], [1.11, 12000], [2.16, 4000], [1.57, 10000], [1.17, 15000], [1, 2100], [1.59, 15000], [1.27, 10000], [1.59, 40000], [1.18, 8000], [2.7, 3000], [1.02, 60000], [1.22, 4000], [1.01, 11000], [1.02, 9500], [1.49, 25000], [1.03, 15000], [1.2, 4000], [1.09, 7500], [1.01, 4000], [3.08, 500], [1.51, 500], [1.24, 4000], [2.25, 5000], [1.04, 2000], [1.04, 10000], [1.29, 1500], [1.25, 3000], [1.13, 2000], [1.51, 500], [1.37, 200], [1.06, 1000], [2.36, 20000], [1.08, 5400], [1.03, 1750], [1.46, 1000], [1.04, 19500], [1.05, 8000], [1.53, 200], [1.33, 800], [1.01, 5000], [1.81, 1400], [1.06, 3000], [3.62, 650], [1.01, 750], [1.01, 1500], [1.11, 7500], [2.88, 1000], [1.14, 1450], [2.53, 36000], [1.19, 777], [1.27, 7500], [1.02, 2000], [1.02, 5000], [1.16, 4000], [1.04, 5500], [1.18, 40000], [1.03, 19650], [1.06, 800], [2.33, 275], [1.2, 15000], [1.03, 55000], [1.24, 2500], [1.12, 35000], [1.91, 4450], [1.2, 4000], [1.02, 15000], [1.15, 3286], [1.12, 9000], [1.08, 1500], [1.1, 150], [1.46, 3000], [1.08, 2000], [1.61, 750], [1.29, 2000], [1, 1500], [1.2, 25000], [1, 1200], [1.45, 150], [1.07, 1500], [1.16, 5150], [1, 5000], [1.12, 20000], [2.66, 400], [1.2, 5500], [1.45, 5000], [3.69, 500], [3.05, 350], [1.3, 5500], [1.27, 1500], [1.17, 10000], [1.03, 10000], [1.01, 2000], [1.1, 2200], [1.04, 3000], [1.94, 125], [1.02, 3500], [1.15, 1000], [1.15, 10000], [1.04, 2500], [1.14, 2200], [1.29, 550], [1.55, 2500], [1.34, 370], [1.17, 4500], [1.2, 1500], [1.11, 7000], [1.17, 1971], [1.01, 9900], [1.36, 250], [1.44, 10000], [1.17, 2000], [1.25, 1750], [1.03, 25000], [1.06, 4500], [3.37, 250], [1.06, 4800], [1, 6000], [1.12, 7500], [1, 15000], [1, 15000], [1.06, 7000], [1.36, 2000], [1.33, 50000], [1.28, 7000], [1.03, 18000], [1.34, 800], [1.59, 25000], [1.93, 19400], [1.03, 12500], [1.48, 2500], [1.2, 500], [1.36, 5500], [1.02, 10900], [1.22, 7500], [1.22, 1000], [1.03, 25000], [1.17, 7500], [1.15, 750], [1, 6000], [1.03, 10000], [1.03, 2500], [1.11, 7500], [1.02, 800], [1.02, 20000], [1.01, 5500], [1.18, 5500], [1.03, 14500], [1.78, 10000], [1.03, 20000], [1.15, 4000], [1.18, 800], [1.11, 15000], [1, 3000], [1.27, 2500], [1.14, 8000], [1.26, 2000], [1.68, 500], [1.01, 10000], [1.01, 3500], [1.01, 2000], [1.08, 2500], [2.03, 10200], [1.1, 16000], [3.49, 500], [1.07, 4000], [1.07, 2300], [1.11, 3250], [1.2, 5000], [3.68, 25000], [1.05, 500], [1.24, 2500], [1, 3000], [1.67, 2300], [2, 5500], [2.34, 10000], [1, 500], [1, 120], [1.13, 3000], [1.65, 25000], [1.04, 5000], [1.19, 13000], [1.25, 1800], [2.26, 4000], [1.12, 900], [3.04, 1000], [1.17, 100000], [1.08, 57000], [2.59, 50000], [1.74, 14000], [2.55, 1000], [1.02, 2000], [1.01, 89999], [1.15, 5000], [1.25, 25000], [1.13, 10000], [2, 8500], [2.02, 10080], [1.29, 4399], [3.6, 10], [1.9, 500], [1.1, 1000], [1.08, 750], [1.48, 5000], [1.26, 20000], [1.03, 40000], [1.73, 2500], [1.07, 3000], [1.18, 8000], [1.12, 2400], [1.33, 5000], [1.26, 2500], [1.68, 20000], [1.03, 100000], [1.18, 3000], [1, 5000], [1.1, 750], [1, 500], [1.19, 40000], [1.1, 1000], [1.14, 700], [3.39, 1000], [1.07, 8000], [1.13, 1200], [1, 1400], [1.02, 3500], [1.02, 10000], [1.03, 4444], [1.17, 6000], [1, 1000], [2.1, 7500], [1.02, 4500], [1.03, 2750], [1.02, 4500], [1.19, 3500], [1.01, 5000], [1.11, 7770], [1.17, 5000], [1.28, 10000], [1.07, 4000], [1.01, 3000], [1, 20000], [1, 1000], [1.03, 850], [1.05, 10000], [1.12, 520], [1.02, 10000], [1.08, 20000], [2.12, 50000], [1.12, 2000], [1.2, 10], [1, 5000], [1.57, 13000], [1.13, 9500], [1.15, 10000], [1.13, 40000], [3.35, 9000], [1.12, 1200], [1, 250], [1.01, 40000], [1.21, 1800], [1.22, 3000], [1.11, 1000], [2.33, 32000], [1.41, 27000], [1.22, 15000], [1.34, 2000], [1.12, 3000], [1.71, 20000], [1.15, 10000], [1.1, 5000], [1.22, 1000], [1.71, 600], [1, 700], [1.02, 10000], [3.3, 60], [1.35, 450], [1.26, 2000], [1.19, 1400], [1.29, 4040], [1.07, 550], [1.3, 3500], [2.16, 2200], [1.01, 2000], [1.26, 9000], [1.01, 1100], [1.19, 4000], [2.1, 2000], [1.39, 6000], [3.31, 2000], [1.27, 5000], [1.01, 5000], [1.23, 43000], [2.59, 2000], [1, 5000], [1.22, 250], [1.05, 5000], [1.12, 6000], [2.1, 250], [1.06, 2750], [1.15, 200], [1.03, 4500], [1.01, 2500], [1.53, 15000], [1.15, 800], [1.05, 1500], [1.41, 700], [1.07, 2500], [1.32, 1200], [1.4, 30000], [1.55, 2023], [1.56, 6500], [1.1, 5000], [1.19, 7500], [1.01, 5000], [1.39, 1000], [1.14, 1300], [2.43, 1750], [2.33, 6000], [1.13, 1500], [1.16, 10000], [1, 1500], [1.08, 19500], [1.09, 100000], [1.04, 1450], [1.91, 2000], [3.7, 20000], [1.34, 30000], [1.33, 500], [1, 2500], [1.31, 10000], [1.55, 3000], [1.53, 2000], [1.05, 1000], [1.53, 1000], [1.65, 999], [2.04, 5000], [1.14, 4000], [1.2, 15000], [1.13, 20000], [2.32, 500], [1.01, 5000], [1.03, 10000], [1.33, 20000], [1.53, 20000], [1, 2000], [1.72, 20000], [1, 9500], [3.84, 500], [1.28, 5000], [1.1, 1600], [1.97, 10000], [1.53, 12000], [1.27, 6000], [1.03, 100000], [1.03, 14000], [1.01, 1500], [1.28, 2223], [1, 28000], [1.19, 8000], [1.06, 850], [1.02, 3600], [1.05, 2000], [1.29, 5000], [1.01, 14000], [1.33, 2000], [1.1, 3000], [1.07, 5000], [1, 5800], [1.03, 200], [3.44, 1000], [1.51, 2100], [1.06, 10000], [1.26, 2000], [1.2, 1250]]   
      }, 
      { 
        name: 'Failed',      
        color: 'rgba(223, 83, 83, .5)',
        data: [
          [0, 1000], [0.08, 30000], [0, 45000], [0, 5000], [0.07, 19500], [0.02, 25000], [0.07, 125000], [0.1, 65000], [0, 2500], [0, 5000], [0.27, 2500], [0.26, 1500], [0.26, 3000], [0.36, 5000], [0, 2500], [0.19, 3500], [0.1, 500], [0, 12000], [0.01, 3500], [0.06, 25000], [0.14, 10000], [0.01, 3000], [0.2, 3000], [0.57, 1500], [0, 2500], [0.08, 1200], [0, 9500], [0, 7500], [0, 13750], [0, 13500], [0.01, 60000], [0.01, 12000], [0.12, 5000], [0.57, 850], [0, 50000], [0, 2000], [0.05, 15000], [0, 5000], [0.02, 87000], [0, 100000], [0.19, 13000], [0, 25000], [0.44, 500], [0, 68000], [0.35, 29700], [0.03, 50000], [0.03, 2000], [0.14, 13000], [0.01, 10000], [0.02, 5000], [0.34, 3000], [0.09, 4500], [0.11, 4289], [0.01, 15000], [0, 25000], [0, 5000], [0.31, 500], [0.23, 50000], [0.01, 1800], [0.01, 5000], [0.15, 500], [0, 100], [0, 10000], [0.47, 1000], [0, 50000], [0, 6325], [0.01, 20000], [0, 25000], [0.02, 125000], [0, 3400], [0, 20000], [0.18, 3200], [0, 650], [0.01, 500], [0.4, 10000], [0.07, 4000], [0, 15000], [0, 25000], [0.09, 3000], [0.1, 1000], [0, 500], [0.01, 2500], [0, 6000], [0.88, 1000], [0, 10000], [0, 600], [0, 18000], [0.26, 12000], [0.15, 1925], [0.16, 8500], [0.02, 500], [0.09, 60000], [0.2, 100], [0.22, 70000], [0.13, 7500], [0.08, 50000], [0.09, 129000], [0, 5000], [0.08, 100000], [0.53, 2500], [0, 1200], [0.09, 6500], [0.33, 2000], [0.15, 32000], [0.04, 50000], [0, 9500], [0.08, 10000], [0.02, 500], [0.04, 50000], [0.06, 5000], [0.03, 30000], [0.01, 4000], [0.01, 14000], [0, 2500], [0, 2000], [0.03, 10000], [0.08, 200], [0.01, 11000], [0.01, 5000], [0, 50000], [0.04, 17500], [0.01, 500], [0, 5000], [0, 8000], [0.12, 700], [0, 15000], [0, 38875], [0, 3500], [0, 5250], [0.09, 2000], [0.03, 3000], [0, 7000], [0, 15000], [0.04, 5000], [0.01, 4000], [0, 500], [0, 1000], [0.02, 75000], [0, 5500], [0.05, 18000], [0, 17000], [0.02, 100000], [0.75, 1000], [0, 25000], [0, 5000], [0.36, 450], [0.03, 3500], [0, 22500], [0.01, 5000], [0, 2000], [0.74, 25000], [0.06, 12000], [0.43, 28000], [0, 10000], [0.09, 10000], [0.07, 59000], [0.47, 2500], [0.06, 800], [0.16, 2000], [0.01, 3397.98], [0.18, 10000], [0.02, 5000], [0.02, 40000], [0.32, 10000], [0.04, 30000], [0.66, 50], [0.12, 9225], [0, 20000], [0.37, 3500], [0.48, 1300], [0.06, 1000], [0.16, 1500], [0.02, 9000], [0.01, 10000], [0.07, 3800], [0.4, 15], [0, 50000], [0, 5000], [0.12, 7000], [0.07, 15000], [0, 20000], [0.5, 5350], [0, 5000], [0.16, 2000], [0.02, 2250], [0, 2000], [0.18, 60000], [0.03, 33000], [0, 7000], [0.01, 8000], [0.19, 1500], [0, 7000], [0.08, 20000], [0, 200], [0, 4500], [0.05, 15000], [0, 65000], [0, 8500], [0.23, 600], [0, 9000], [0, 3000], [0.01, 20000], [0.11, 50000], [0.01, 15000], [0.04, 2000], [0.29, 3500], [0, 10000], [0.03, 5000], [0, 500], [0, 500], [0.01, 40000], [0, 1000], [0, 1000], [0.77, 6000], [0.01, 3500], [0, 40000], [0.13, 28000], [0, 25000], [0.07, 4000], [0.04, 20000], [0.01, 15000], [0, 30000], [0.01, 3500], [0.09, 1000], [0.01, 7000], [0, 5000], [0, 2000], [0.18, 1287], [0.01, 3500], [0, 15000], [0, 15000], [0.01, 60000], [0.06, 15000], [0, 2000], [0.07, 2500], [0.05, 20000], [0, 500], [0.29, 10000], [0.4, 3000], [0.01, 10000], [0.23, 175], [0.06, 3000], [0.05, 25000], [0, 15000], [0.26, 35000], [0.03, 3000], [0, 6055], [0.02, 600], [0.27, 3000], [0.46, 350], [0.12, 8000], [0, 150000], [0, 200], [0.29, 200], [0, 1500], [0.07, 3000], [0.28, 6500], [0, 4000], [0, 22000], [0, 400], [0.04, 3021], [0.28, 25000], [0.26, 15000], [0, 20000], [0.49, 850], [0, 300], [0.02, 18000], [0.05, 25000], [0.02, 600], [0.02, 5000], [0, 1100], [0, 98000], [0.09, 7500], [0.01, 5000], [0.02, 16000], [0, 2000], [0, 2000], [0.49, 700], [0, 15000], [0.05, 5500], [0, 1000], [0.03, 5000], [0.1, 13500], [0.4, 10000], [0.02, 22500], [0, 4500], [0.03, 50000], [0.04, 5000], [0, 50000], [0.01, 6000], [0, 25000], [0.01, 2750], [0.06, 900], [0, 5000], [0.04, 10000], [0.01, 7000], [0, 3000], [0.02, 45000], [0, 10000], [0.01, 250], [0.26, 2500], [0.12, 10000], [0.06, 1000], [0, 150000], [0.01, 3500], [0, 5000], [0, 500], [0.36, 12000], [0, 2600], [0.06, 15000], [0.02, 750], [0, 2000], [0.45, 12000], [0.01, 5000], [0.26, 4000], [0, 1000], [0.18, 75000], [0.07, 35000], [0, 10000], [0.21, 7000], [0, 1500], [0.02, 34000], [0, 1400], [0, 1675], [0.29, 500], [0.02, 62700], [0.01, 1000], [0.18, 100000], [0.07, 5000], [0.14, 7000], [0.02, 75000], [0.05, 2000], [0.25, 20000], [0, 150000], [0, 800], [0.52, 5000], [0, 49786], [0.02, 3000], [0.17, 10000], [0.15, 444], [0.88, 390], [0.09, 15000], [0, 3500], [0, 1000], [0, 20000], [0.16, 3500], [0.01, 20000], [0.03, 12000], [0.04, 300], [0, 50000], [0.04, 5000], [0.01, 4500], [0, 216], [0.08, 2000], [0, 5000], [0, 55000], [0, 41000], [0.04, 160], [0.02, 49000], [0, 2000], [0.03, 1200], [0, 3500], [0.24, 5500], [0.24, 35000], [0, 150000], [0, 3000], [0, 2500], [0, 15000], [0.42, 750], [0, 2000], [0, 4500], [0.02, 5000], [0.01, 45000], [0.26, 45000], [0.11, 35000], [0.06, 5000], [0, 5000], [0.02, 70000], [0.19, 8500], [0.3, 8000], [0.53, 1000], [0.02, 10000], [0.02, 70000], [0, 100000], [0.12, 5000], [0.16, 1500], [0.03, 21500], [0.03, 9000], [0, 25000], [0, 117000], [0, 30000], [0, 4860], [0.44, 5000], [0.01, 6000], [0.03, 4500], [0.01, 35000], [0, 6907], [0.09, 3000], [0, 2000], [0.37, 55000], [0.03, 30000], [0.12, 10000], [0.07, 2500], [0.89, 6000], [0.14, 100], [0.07, 1500], [0.99, 8450], [0, 70000], [0.01, 68000], [0.57, 8000], [0.03, 5000], [0.15, 40000], [0, 11000], [0, 500], [0.13, 500], [0.11, 10000], [0.5, 100000], [0.03, 5000], [0.17, 10850], [0, 1500], [0, 40000], [0.24, 3000], [0.11, 30000], [0.03, 2000], [0.35, 8994], [0, 4000], [0.15, 3500], [0, 1000], [0, 1000], [0.24, 10000], [0, 1555], [0.05, 100000], [0.11, 2200], [0, 100000], [0.04, 10000], [0.02, 3000], [0.09, 2500], [0, 10000], [0, 45000], [0.32, 750], [0.05, 4000], [0.02, 13000], [0, 20], [0.01, 3000], [0, 1115], [0, 175000], [0, 25000], [0.01, 20000], [0, 10000], [0.33, 600], [0, 800], [0.36, 25000], [0, 3000], [0, 65000], [0.01, 60000], [0, 1000], [0.01, 12000], [0.01, 2000], [0, 600], [0.21, 2000], [0.01, 5000], [0.25, 800], [0.15, 150000], [0.37, 16000], [0.03, 24000], [0.03, 7500], [0.01, 400], [0.25, 1500], [0, 80000], [0.06, 2500], [0, 10000], [0.01, 20000], [0.04, 2000], [0.17, 19000], [0.01, 900], [0.27, 1000], [0.02, 50000], [0, 125000], [0, 200], [0.03, 100], [0.19, 10000], [0, 300], [0.47, 3500], [0.01, 500], [0.16, 4000], [0.01, 10000], [0, 2000], [0.01, 50000], [0.05, 10000], [0, 15000], [0, 30000], [0.04, 1000], [0, 6000], [0.07, 3100], [0, 5000], [0, 6000], [0.64, 4000], [0, 8000], [0.05, 20000], [0, 5000], [0, 10000], [0, 5000], [0.03, 4000], [0.63, 30000], [0, 2000], [0, 7500], [0.21, 3000], [0, 110000], [0.03, 600], [0.62, 3000], [0.08, 28000], [0.19, 40000], [0.01, 1000], [0, 70000], [0, 10000], [0, 500], [0.28, 2800], [0.08, 15000], [0.05, 25000], [0, 650], [0.21, 2000], [0.4, 11678], [0, 9500], [0.37, 50000], [0, 5000], [0.02, 4000], [0.03, 1000], [0.05, 1000], [0.11, 105000], [0.02, 5000], [0, 10000], [0.1, 3000], [0.11, 10667], [0.07, 75000], [0.21, 50000], [0.29, 30000], [0, 10000], [0.17, 20000], [0, 2000], [0.34, 10000], [0.33, 3000], [0, 500], [0, 160000], [0.07, 25000], [0.42, 2743], [0.34, 6500], [0, 60000], [0.06, 3000], [0.02, 3000], [0, 500], [0.02, 2500], [0, 3000], [0.05, 2500], [0.05, 110], [0, 10000], [0, 1000], [0.09, 1200], [0.18, 500], [0.02, 210], [0, 4500], [0.15, 500], [0, 500], [0.03, 31400], [0.08, 2100], [0, 3000], [0, 100000], [0, 700], [0.21, 30000], [0.06, 40000], [0.39, 2000], [0, 3500], [0.03, 10000], [0.67, 25000], [0.06, 15000], [0.03, 4500], [0.03, 20000], [0.07, 4500], [0.26, 450], [0, 10000], [0.67, 1001], [0.06, 2000], [0.04, 20000], [0.41, 50000], [0.01, 2000], [0, 100000], [0, 52000], [0, 4500], [0.01, 5000], [0.28, 25000], [0.16, 900], [0.24, 4300], [0, 1500], [0, 2000], [0.04, 1000], [0.26, 100000], [0.05, 1500], [0.26, 40000], [0, 4500], [0, 7000], [0.48, 12000], [0.18, 1500], [0.01, 35000], [0.42, 25000], [0.14, 70000], [0, 20000], [0.03, 10000], [0, 5500], [0, 5000], [0.03, 500], [0.52, 40000], [0.06, 360], [0, 800], [0.05, 3000], [0.76, 60000], [0, 18000]]
  }]
});
});